@extends("base")

@section('sidebar')
	@parent

@endsection

@section('content')

	<div class="box box-info">
		<div class="box-header with-border">
			<h3 class="box-title">Training Foreign</h3>

			<div class="box-tools">

			</div><!-- /.box-tools -->
		</div><!-- /.box-header -->

		<div class="box-body">
			<table class="table" id="employee_table" cellspacing="0">
				<thead>
				<tr>
					<th>EMP_ID</th>
					<th>EMP_NAME</th>
					<th>F_H_NAME</th>
					<th>DOB</th>
					<th>GENDER</th>
					<th>CNIC</th>
					<th>DOMICILE</th>
					<th>HOME_DISTRICT</th>
					<th>RELIGION</th>
					<th>CADRE_NAME_OWN</th>
					<th>DESIGNATION_OWN</th>
					<th>POST_NAME_OWN</th>
					<th>ZONE_TITLE</th>
					<th>REGION_NAME</th>
					<th>PLACE_TITLE</th>
					<th>PLACE_TYPE</th>
					<th>WING_NAME</th>
					<th>SECTION_NAME</th>
					<th>WING_HEAD</th>
					<th>POSTING_TENURE</th>
					<th>POSTING_DATE</th>
					<th>TRANSFER_TENURE</th>
					<th>TRANSFER_DATE</th>
					<th>TOTAL_POSTING</th>
					<th>TOTAL_TRANSFER</th>
					<th>DATE_OF_APPOINTMENT</th>
					<th>TYPE_OF_APPOINTMENT</th>
					<th>APPOINTMENT_QUOTA</th>
					<th>SERVICE_TYPE</th>
					<th>HIGHEST_QUALIFICATION</th>
					<th>ACR_TOTAL</th>
					<th>ACR_SUBMITTIED</th>
					<th>ACR_REMAINING</th>
					<th>ASSET_TOTAL</th>
					<th>ASSET_SUBMITTIED</th>
					<th>ASSET_REMAINING</th>
					<th>TOTAL_REWARD</th>
					<th>TOTAL_PANELTIES</th>
					<th>TOTAL_DEPENDENTS</th>
					<th>TOTAL_TRAINING</th>
					<th>MARITAL_STATUS</th>
					<th>DUAL_NATIONALITY</th>
					<th>REF_FILE_NO</th>
					<th>OFF_PHONE_NO</th>
					<th>OFF_EXT_NO</th>
					<th>RES_PHONE_NO</th>
					<th>MOBILE_NO</th>
					<th>EMRGCY_CONTACT_ADDRESS</th>
					<th>FP_ID</th>
					<th>EMP_STATUS</th>
				</tr>
				</thead>

				<thead class="multi_search">
				<tr>
					<th>EMP_ID</th>
					<th>EMP_NAME</th>
					<th>F_H_NAME</th>
					<th>DOB</th>
					<th>GENDER</th>
					<th>CNIC</th>
					<th>DOMICILE</th>
					<th>HOME_DISTRICT</th>
					<th>RELIGION</th>
					<th>CADRE_NAME_OWN</th>
					<th>DESIGNATION_OWN</th>
					<th>POST_NAME_OWN</th>
					<th>ZONE_TITLE</th>
					<th>REGION_NAME</th>
					<th>PLACE_TITLE</th>
					<th>PLACE_TYPE</th>
					<th>WING_NAME</th>
					<th>SECTION_NAME</th>
					<th>WING_HEAD</th>
					<th>POSTING_TENURE</th>
					<th>POSTING_DATE</th>
					<th>TRANSFER_TENURE</th>
					<th>TRANSFER_DATE</th>
					<th>TOTAL_POSTING</th>
					<th>TOTAL_TRANSFER</th>
					<th>DATE_OF_APPOINTMENT</th>
					<th>TYPE_OF_APPOINTMENT</th>
					<th>APPOINTMENT_QUOTA</th>
					<th>SERVICE_TYPE</th>
					<th>HIGHEST_QUALIFICATION</th>
					<th>ACR_TOTAL</th>
					<th>ACR_SUBMITTIED</th>
					<th>ACR_REMAINING</th>
					<th>ASSET_TOTAL</th>
					<th>ASSET_SUBMITTIED</th>
					<th>ASSET_REMAINING</th>
					<th>TOTAL_REWARD</th>
					<th>TOTAL_PANELTIES</th>
					<th>TOTAL_DEPENDENTS</th>
					<th>TOTAL_TRAINING</th>
					<th>MARITAL_STATUS</th>
					<th>DUAL_NATIONALITY</th>
					<th>REF_FILE_NO</th>
					<th>OFF_PHONE_NO</th>
					<th>OFF_EXT_NO</th>
					<th>RES_PHONE_NO</th>
					<th>MOBILE_NO</th>
					<th>EMRGCY_CONTACT_ADDRESS</th>
					<th>FP_ID</th>
					<th>EMP_STATUS</th>
				</tr>
				</thead>



			</table>
		</div><!-- /.box-body -->

	</div><!-- /.box -->

	{!! Html::style('https://cdn.datatables.net/buttons/1.1.0/css/buttons.dataTables.min.css') !!}

	<style>
		div.dataTables_wrapper {
			width: 100% !important;
			margin: 0 auto;
		}
	</style>

@section('js')

	$('#employee_table thead th').each( function () {
	var title = $(this).text();

	if(title == 'ID')
	$(this).html( '<div style="width:60px">'+title+'</div>' );
	else
	$(this).html( '<div style="width:155px">'+title+'</div>' );
	} );

	// Setup - add a text input to each header cell
	$('#employee_table thead.multi_search th').each( function () {
	var title = $(this).text();
	var css;

	if(title == 'ID') css = 'style="width:60px;"';
	if(title == 'Action') return;
	if(title == 'Profile Picture') return;
	$(this).html( '<input type="text" placeholder="Search '+title+'" '+css+'/>' );
	} );

	var table = $('#employee_table').DataTable({
	processing: true,
	serverSide: true,
	scrollX: true,
	scrollXInner: '100%',
	scrollCollapse: true,
	lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "All"]],
	// to export data
	dom: 'lrtipB',
	buttons: [

	'copy', 'csv', 'excel', 'pdf', 'print'

	],
	ajax: '{{ url("report/training_foreign_data") }}',
	columns: [
	null,
	null,
	null,
	{
	type: 'date',
	render: function(data) {
	if(data) {
	var tmp = data.split(' ');
	var date = new Date(tmp[0]);
	var year = date.getFullYear().toString();
	var month = (date.getMonth()+1).toString(); // getMonth() is zero-based
	var day  = date.getDate().toString();
	return (day[1]?day:"0"+day[0]) + '/' + (month[1]?month:"0"+month[0]) + '/' + year; // padding
	}
	else
	return data;
	},
	},
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	{
	type: 'date',
	render: function(data) {
	if(data) {
	var tmp = data.split(' ');
	var date = new Date(tmp[0]);
	var year = date.getFullYear().toString();
	var month = (date.getMonth()+1).toString(); // getMonth() is zero-based
	var day  = date.getDate().toString();
	return (day[1]?day:"0"+day[0]) + '/' + (month[1]?month:"0"+month[0]) + '/' + year; // padding
	}
	else
	return data;
	},
	},
	null,
	{
	type: 'date',
	render: function(data) {
	if(data) {
	var tmp = data.split(' ');
	var date = new Date(tmp[0]);
	var year = date.getFullYear().toString();
	var month = (date.getMonth()+1).toString(); // getMonth() is zero-based
	var day  = date.getDate().toString();
	return (day[1]?day:"0"+day[0]) + '/' + (month[1]?month:"0"+month[0]) + '/' + year; // padding
	}
	else
	return data;
	},
	},
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null,
	null
	]
	});

	/* Apply the search for individual columns*/
	table.columns().every( function () {

	var that = this;

	$( 'input', this.footer() ).on( 'keydown', function (ev) {

	if (ev.keyCode == 13) { //only on enter keypress (code 13)

	that
	.column( $(this).parent().index()+':visible')
	.search( this.value )
	.draw();
	}
	});
	});

@endsection

{!! Html::script("https://code.jquery.com/jquery-1.11.3.min.js") !!}
{!! Html::script("https://cdn.datatables.net/1.10.10/js/jquery.dataTables.min.js") !!}
{!! Html::script("https://cdn.datatables.net/buttons/1.1.0/js/dataTables.buttons.min.js") !!}
{!! Html::script("https://cdn.datatables.net/buttons/1.1.0/js/buttons.flash.min.js") !!}
{!! Html::script("https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js") !!}
{!! Html::script("https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/pdfmake.min.js") !!}
{!! Html::script("https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/vfs_fonts.js") !!}
{!! Html::script("https://cdn.datatables.net/buttons/1.1.0/js/buttons.html5.min.js") !!}
{!! Html::script("https://cdn.datatables.net/buttons/1.1.0/js/buttons.print.min.js") !!}

@stop