     <?php $__env->startSection('sidebar'); ?>
     @parent
         <h1>Role</h1>
     <?php $__env->stopSection(); ?>

     <?php $__env->startSection('content'); ?>



          <div class="box box-primary">
              <div class="box-header">
                 <h4>Edit Role</h4>
              </div>
              <div class="box-body">
               <?php echo Form::open(array('url' => 'role/' . $role->id, 'method' => 'PUT', 'class' => 'form-horizontal')); ?>

                  <div class="col-sm-6">
                      <div class="row">
                          <div class="form-group">
                              <label class="col-sm-12 ">Name</label>
                              <div class="col-sm-12">
                                  <?php echo Form::text('name', $role->name, array('class' => 'form-control input-sm')); ?>

                              </div>
                          </div>
                      </div>
                      <div class="row">
                          <div class="form-group">
                              <label class="col-sm-12">Display Name</label>
                              <div class="col-sm-12">
                                  <?php echo Form::text('display_name', $role->display_name, array('class' => 'form-control input-sm')); ?>

                              </div>
                          </div>
                      </div>
                      <div class="row">
                          <div class="form-group">
                              <label class="col-sm-12">Description</label>
                              <div class="col-sm-12">
                                  <?php echo Form::textarea('description', $role->description, array('class' => 'form-control input-sm')); ?>

                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="col-sm-6">
                      <table class="table table-responsive table-bordered table-striped">
                          <thead>
                          <tr>
                              <th>Permission</th>
                              <th>Mark</th>
                          </tr>
                          </thead>
                          <tbody>
                          <?php foreach($permissions as $permission): ?>
                              <?php
                              $class = '';
                              $res = DB::table('permission_role')
                                      ->where('role_id', '=', $role->id)
                                      ->where('permission_id', '=', $permission->id)
                                      ->get();

                               ($res == null) ? $class = '' : $class = 'checked';
                              ?>
                              <tr>
                                  <td><?php echo e($permission->display_name); ?></td>
                                  <td><input type="checkbox" name="permissionsToAssign[]" value="<?php echo e($permission->id); ?>" <?php echo e($class); ?>></td>
                              </tr>
							  <?php $submenus = App\Permission::where('parent', '=', $permission->id)->get(); ?>

								<?php if(!$submenus->isEmpty()): ?>									
									<?php foreach($submenus as $submenu): ?>
                                        <?php
                                        $class = '';
                                        $res = DB::table('permission_role')
                                                ->where('role_id', '=', $role->id)
                                                ->where('permission_id', '=', $submenu->id)
                                                ->get();

                                        ($res == null) ? $class = '' : $class = 'checked';
                                        ?>
										<tr>
											<td style="padding-left:40px;"><?php echo e($submenu->display_name); ?></td>
											<td><input type="checkbox" name="permissionsToAssign[]" value="<?php echo e($submenu->id); ?>" <?php echo e($class); ?>></td>
										</tr>
									<?php endforeach; ?>
								<?php endif; ?>

                          <?php endforeach; ?>
                          </tbody>
                      </table>

                  </div>
                  <div class="row">
                      <div class="col-sm-12">
                          <button type="submit" class="btn btn-primary pull-right">Save</button>
                      </div>
                  </div>

               <?php echo Form::close(); ?>

              </div>
          </div>
     <?php $__env->stopSection(); ?>

<?php echo $__env->make("base", array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>