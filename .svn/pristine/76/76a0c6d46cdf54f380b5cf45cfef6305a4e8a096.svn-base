@extends("base")

@section('sidebar')
@parent

@endsection

@section('content')

	<div class="box box-info">
		<div class="box-header with-border">
			<h3 class="box-title">Employees</h3>
			
			<div class="box-tools">

			</div><!-- /.box-tools -->
		</div><!-- /.box-header -->

		<div class="box-body">
			<table class="table table-striped dataTables_wrapper" id="employee_table" cellspacing="0">
				<thead>
				<tr>
					<th>ID</th>
					<th>Name</th>
					<th>Father Name</th>
					<th>DOB</th>
					<th>CNIC</th>
					<th>Domicile</th>
					<th>BS</th>
					<th>Post Name</th>
					<th>Ref File No.</th>
					<th>Date of Appointment</th>
					<th>Type of Appointment</th>
					<th>Action</th>
				</tr>
				</thead>
				
				<tfoot>
				<tr>
					<th>ID</th>
					<th>Name</th>
					<th>Father Name</th>
					<th>DOB</th>
					<th>CNIC</th>
					<th>Domicile</th>
					<th>BS</th>
					<th>Post Name</th>
					<th>Ref File No.</th>
					<th>Date of Appointment</th>
					<th>Type of Appointment</th>
					<th>Action</th>
				</tr>
				</tfoot>

			</table>
		</div><!-- /.box-body -->

	</div><!-- /.box -->

{!! Html::style('https://cdn.datatables.net/buttons/1.1.0/css/buttons.dataTables.min.css') !!}

<style>	
div.dataTables_wrapper {
		width: 100% !important;
		margin: 0 auto;
	}
</style>

@section('js')


	// Setup - add a text input to each footer cell
	$('#employee_table tfoot th').each( function () {
		var title = $(this).text();
		$(this).html( '<input type="text" placeholder="Search '+title+'" />' );
	} );
 
	
$('#employee_table').DataTable({
        processing: true,
        serverSide: true,
		scrollX: true,
		lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "All"]],
		// to export data
		dom: 'flrtipB',
        buttons: [
		{
			extend:    'copy',
			text:      '<i class="fa fa-files-o"></i>',
			titleAttr: 'Copy'
		},
		{
			extend:    'csv',
			text:      '<i class="fa fa-file-text-o"></i>',
			titleAttr: 'CSV'
		},
		{
			extend:    'excel',
			text:      '<i class="fa fa-file-excel-o"></i>',
			titleAttr: 'Excel'
		},
		{
			extend:    'pdf',
			text:      '<i class="fa fa-file-pdf-o"></i>',
			titleAttr: 'PDF'
		},
		{
			extend:    'print',
			text:      '<i class="fa fa-print"></i>',
			titleAttr: 'Print'
		}
		],
        ajax: '{{ url("employees/employees_list_data") }}',
		columns: [
			null,
			null,
			null,
            {
				type: 'date',
				render: function(data) {
					if(data) {
						var tmp = data.split(' ');
						var date = new Date(tmp[0]);
						var year = date.getFullYear().toString();
						var month = (date.getMonth()+1).toString(); // getMonth() is zero-based
						var day  = date.getDate().toString();
						return (day[1]?day:"0"+day[0]) + '/' + (month[1]?month:"0"+month[0]) + '/' + year; // padding
					}
					else
						return data;
				},
			},
            null,
            null,
            null,
            null,
            null,
            {
				type: 'date',
				render: function(data) {
					if(data) {
						var tmp = data.split(' ');
						var date = new Date(tmp[0]);
						var year = date.getFullYear().toString();
						var month = (date.getMonth()+1).toString(); // getMonth() is zero-based
						var day  = date.getDate().toString();
						return (day[1]?day:"0"+day[0]) + '/' + (month[1]?month:"0"+month[0]) + '/' + year; // padding
					}
					else
						return data;
				},
			},
            {orderable: false, searchable: false},
            {orderable: false, searchable: false}
        ]
      });
	  
	// DataTable
	var table = $('#employee_table').DataTable();
 
	/* Apply the search for individual columns*/
	table.columns().every( function () {

		var that = this;

		$( 'input', this.footer() ).on( 'keydown', function (ev) {

			 if (ev.keyCode == 13) { //only on enter keypress (code 13)

				that
					.column( $(this).parent().index()+':visible')
					.search( this.value )
					.draw();
			 }
		});
	});
	
	
	var table = $('#employee_table').DataTable( {

		scrollX: "100%"

	} );

	 

	$( table.table().footer() ).addClass( 'highlight' );
	
@endsection

{!! Html::script("https://code.jquery.com/jquery-1.11.3.min.js") !!}
{!! Html::script("https://cdn.datatables.net/1.10.10/js/jquery.dataTables.min.js") !!}
{!! Html::script("https://cdn.datatables.net/buttons/1.1.0/js/dataTables.buttons.min.js") !!}
{!! Html::script("https://cdn.datatables.net/buttons/1.1.0/js/buttons.flash.min.js") !!}
{!! Html::script("https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js") !!}
{!! Html::script("https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/pdfmake.min.js") !!}
{!! Html::script("https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/vfs_fonts.js") !!}
{!! Html::script("https://cdn.datatables.net/buttons/1.1.0/js/buttons.html5.min.js") !!}
{!! Html::script("https://cdn.datatables.net/buttons/1.1.0/js/buttons.print.min.js") !!}

@stop